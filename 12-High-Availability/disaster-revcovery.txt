# Disaster recovery and high availability using AWS

- Recovery Time Objective - is the time required to recover from a disaster.
- Recovery Point Objective - is the acceptable amount of data measured in time.
  time when the system can be restored before the event of disaster. Let's say that
  RPO is 1 hour and a disaster has occurred at 12:00PM then, the data before RPO
  time i.e., 1 hour - 11 AM should be restored
- Backup/Restore
  - Like using AWS as a virtual tape library.
  - Backup and recovery using AWS S3, Amazon Glacier, Amazon Storage Gateway.
  - RTO is 8-24 hours.
  - RPO - Could be upto 24 hours.
  - What is the retention time for media.
  - Security of archives.
  - Regular testing.
  - Cost is low.

- Pilot Light
  - Minimal version of environment running on AWS which can be lit up and expanded to
    full size from this pilot light.
  - Services used are AMIs, Bootstrapping, EIPs, ELBs, CloudFormation, Amazon RDS.
  - RTO is 4-8 hours.
  - RPO is based on last snapshot last available.
  - Cost is low.
- Warm standby
  - Scaled down version of fully functionnal environment always running.
  - Services used are AMIs, Bootstrapping, EIPs, ELBs, CloudFormation, Amazon RDS.
  - RTO is <4 hours.
  - RPO is based on last data write if a master/slave in a Multi-AZ DB.
  - Cost is Medium.
- Multi-Site
  - Fully operational version of fully functionnal environment always running either
    running off-site or in another region.
  - Services used are All AWS services.
  - RTO is <60 minutes.
  - RPO is based on last data write if a synchronous DB in a Multi-AZ DB.
  - Cost is High.

Replication Considerations:
- Distance between the sites - Larger the distance are typically subject to more
  latency or jitter
- Available bandwidth - The length and variability of interconnections
- Data required by your application - The data required should be less than the
  available bandwidth
- Replication technology - The replication technology should be parallel so that
  it can use the network effectively

Replication basics:
Synchronous replication:
- Atomic write update to multiple clusters in multiple AZs.

Asynchronous replication:
- Non-Atomic update happens to secondary as network and bandwidth permit.


# Data Storage Solutions in DR
Using AWS S3 as data backup solution:
  - Huge capacity to scale
  - Highly durable
  - Highly reliable
  - Store data from 1Byte to 5TB
  - Multiple security features
  - Different storage classes offering different benefits
  S3 Standard:
  - Availability: 99.99%
  - Durability: 99.999999999%
  - Data management capabilities which can move data to different storage class
    based on how frequently it is accessed.
  S3 Standard - Infrequently Accessed:
  - Availability: 99.9%
  - Durability: 99.999999999%
  Amazon Glacier:
  - Stores data in archives
  - Upto 40 TB in size.
  - Archives are stored within vaults.
  - Primarily used for data archiving.
- To reduce data retrievel latency, it is recommended to enable CRR - Cross
  Region Replication.
- Use Multipart upload to upload the data in S3 if the size of the object is > 100MB.

Using AWS Snowball:
  - Used to securely transfer large amounts of data in and out of AWS in Petabytes scale.
  - Data can be transferred either from on-premise datacenter to S3 or vice-versa using
    a physical device known as Snowball.
  - The Snowball appliance comes as a 50TB or 80TB storage device.
  - The device is dust, water and tamper resistant.
  - Built for high speed data transfer which is compatible using RJ45, SFP + Copper
    or SFP + Optical Fiber.
  - Data is automatically encrypted using 256 bit encryption key.
  - End to End tracking using E Ink shipping label.
  - The Snowball appliance can be tracked using SNS or using AWS Management console.
  
